{"ast":null,"code":"import _regeneratorRuntime from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'../../styles/auth/style.scss';import{useForm}from'react-hook-form';import{Link,useHistory}from'react-router-dom';import Axios from'axios';import api from'../../utils/url';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Logo from'../../assets/static/logo.png';toast.configure();var Login=function Login(){var history=useHistory();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];// Check Token\nvar checkToken=function checkToken(token){localStorage.setItem('token',token);var role=token.split('.')[0];if(role==='admin'){return history.push('/admin');}if(role==='user'){return history.push('/home');}};// Check if logged in \nif(localStorage.getItem('token')){checkToken(localStorage.getItem('token'));}var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return Axios.post(\"\".concat(api,\"login\"),data);case 4:response=_context.sent;// console.log(response)\nif(response.status===200){setLoading(false);localStorage.setItem('id',response.data.id);checkToken(response.data.token);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0){setLoading(false);toast.warn(_context.t0.response.data.message);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-center flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card border-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header text-center bg-white border-0\"},/*#__PURE__*/React.createElement(\"img\",{src:Logo,className:\"img-fluid\",alt:\"...\"}),/*#__PURE__*/React.createElement(\"h4\",null,\"Login Account\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-3\"},errors.email&&errors.email.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.email&&errors.email.message):/*#__PURE__*/React.createElement(\"small\",null,\"E-mail\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",className:\"form-control shadow-none\",placeholder:\"Your e-mail\",ref:register({required:\"E-mail is required\",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:\"Invalid email address\"}})})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-3\"},errors.password&&errors.password.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.password&&errors.password.message):/*#__PURE__*/React.createElement(\"small\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",className:\"form-control shadow-none\",placeholder:\"*****\",ref:register({required:\"Please enter password\"})})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-info shadow-none text-white btn-block\",disabled:isLoading},isLoading?/*#__PURE__*/React.createElement(\"span\",null,\"Logging...\"):/*#__PURE__*/React.createElement(\"span\",null,\"Login\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},/*#__PURE__*/React.createElement(\"p\",null,\"Have no account ? \",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"Register\")),/*#__PURE__*/React.createElement(\"p\",null,\"Forgot password? \",/*#__PURE__*/React.createElement(Link,{to:\"/reset\"},\"Reset\"))))))));};export default Login;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/auth/Login.js"],"names":["React","useState","useForm","Link","useHistory","Axios","api","toast","Logo","configure","Login","history","register","handleSubmit","errors","isLoading","setLoading","checkToken","token","localStorage","setItem","role","split","push","getItem","onSubmit","data","post","response","status","id","warn","message","email","required","pattern","value","password"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport '../../styles/auth/style.scss'\nimport { useForm } from 'react-hook-form'\nimport { Link, useHistory } from 'react-router-dom'\nimport Axios from 'axios'\nimport api from '../../utils/url'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport Logo from '../../assets/static/logo.png'\n\ntoast.configure()\nconst Login = () => {\n    const history = useHistory()\n    const { register, handleSubmit, errors } = useForm()\n    const [isLoading, setLoading] = useState(false)\n\n    // Check Token\n    const checkToken = (token) => {\n        localStorage.setItem('token', token)\n        const role = token.split('.')[0]\n        if (role === 'admin') {\n            return history.push('/admin')\n        }\n\n        if (role === 'user') {\n            return history.push('/home')\n        }\n    }\n\n    // Check if logged in \n    if (localStorage.getItem('token')) {\n        checkToken(localStorage.getItem('token'))\n    }\n\n    const onSubmit = async (data) => {\n        try {\n            setLoading(true)\n            const response = await Axios.post(`${api}login`, data)\n            // console.log(response)\n            if (response.status === 200) {\n                setLoading(false)\n                localStorage.setItem('id', response.data.id)\n                checkToken(response.data.token)\n            }\n        } catch (error) {\n            if (error) {\n                setLoading(false)\n                toast.warn(error.response.data.message)\n            }\n        }\n    }\n\n    return (\n        <div className=\"auth\">\n            <div className=\"flex-center flex-column\">\n                <div className=\"card border-0\">\n                    <div className=\"card-header text-center bg-white border-0\">\n                        <img src={Logo} className=\"img-fluid\" alt=\"...\" />\n                        <h4>Login Account</h4>\n                    </div>\n                    <div className=\"card-body\">\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            {/* Email */}\n                            <div className=\"form-group mb-3\">\n                                {errors.email && errors.email.message ? (\n                                    <small className=\"text-danger\">{errors.email && errors.email.message}</small>\n                                ) : <small>E-mail</small>\n                                }\n\n                                <input\n                                    type=\"text\"\n                                    name=\"email\"\n                                    className=\"form-control shadow-none\"\n                                    placeholder=\"Your e-mail\"\n                                    ref={register({\n                                        required: \"E-mail is required\",\n                                        pattern: {\n                                            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                            message: \"Invalid email address\"\n                                        }\n                                    })}\n                                />\n                            </div>\n\n                            {/* Password */}\n                            <div className=\"form-group mb-3\">\n                                {errors.password && errors.password.message ? (\n                                    <small className=\"text-danger\">{errors.password && errors.password.message}</small>\n                                ) : <small>Password</small>\n                                }\n\n                                <input\n                                    type=\"password\"\n                                    name=\"password\"\n                                    className=\"form-control shadow-none\"\n                                    placeholder=\"*****\"\n                                    ref={register({\n                                        required: \"Please enter password\",\n                                    })}\n                                />\n                            </div>\n\n                            <button type=\"submit\" className=\"btn btn-info shadow-none text-white btn-block\" disabled={isLoading}>\n                                {isLoading ? <span>Logging...</span> : <span>Login</span>}\n                            </button>\n                            <br />\n\n                            <div className=\"text-right\">\n                                <p>Have no account ? <Link to=\"/register\">Register</Link></p>\n                                <p>Forgot password? <Link to=\"/reset\">Reset</Link></p>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}