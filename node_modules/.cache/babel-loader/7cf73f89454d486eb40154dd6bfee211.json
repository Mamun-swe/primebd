{"ast":null,"code":"import _regeneratorRuntime from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useForm}from\"react-hook-form\";import'../../../styles/user/upload-video/style.scss';import axios from'axios';import url from'../../../utils/url';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Navbar from'../../../components/AdminNavbar/Index';toast.configure();var Create=function Create(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),fileErr=_useState2[0],setFileErr=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedFile=_useState6[0],setSelectedFile=_useState6[1];var header={headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}};// Image onChange\nvar imageChangeHandeller=function imageChangeHandeller(event){var file=event.target.files[0];if(file){setSelectedFile(file);}};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var formData,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(selectedFile){_context.next=3;break;}return _context.abrupt(\"return\",setFileErr(true));case 3:formData=new FormData();formData.append('name',data.name);formData.append('image',selectedFile);setLoading(true);_context.next=9;return axios.post(\"\".concat(url,\"admin/category\"),formData,header);case 9:response=_context.sent;if(response.data.status===true){toast.success(response.data.message);setLoading(false);}if(response.data.status===false){toast.warn(response.data.message);setLoading(false);}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);if(_context.t0){console.log(_context.t0.response);}case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"category-create upload\"},/*#__PURE__*/React.createElement(Navbar,{back:true,title:'Create Category'}),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid py-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4\"},errors.name&&errors.name.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.name&&errors.name.message):/*#__PURE__*/React.createElement(\"small\",null,\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",className:\"form-control rounded-0 shadow-none\",placeholder:\"Enter name\",ref:register({required:\"Name is required\"})})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4\"},fileErr?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},\"Banner is required\"):/*#__PURE__*/React.createElement(\"small\",null,\"Banner\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"banner\",className:\"inputfile\",accept:\"image/*\",onChange:imageChangeHandeller}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"banner\"},/*#__PURE__*/React.createElement(\"p\",null,\"Banner Image\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-block btn-primary rounded-0 text-white shadow-none\",disabled:isLoading},isLoading?/*#__PURE__*/React.createElement(\"span\",null,\"Creating...\"):/*#__PURE__*/React.createElement(\"span\",null,\"Create\")))))));};export default Create;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/admin/Category/Create.js"],"names":["React","useState","useForm","axios","url","toast","Navbar","configure","Create","register","handleSubmit","errors","fileErr","setFileErr","isLoading","setLoading","selectedFile","setSelectedFile","header","headers","Authorization","localStorage","getItem","imageChangeHandeller","event","file","target","files","onSubmit","data","formData","FormData","append","name","post","response","status","success","message","warn","console","log","required"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useForm } from \"react-hook-form\"\nimport '../../../styles/user/upload-video/style.scss'\nimport axios from 'axios'\nimport url from '../../../utils/url'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport Navbar from '../../../components/AdminNavbar/Index'\ntoast.configure()\nconst Create = () => {\n    const { register, handleSubmit, errors } = useForm()\n    const [fileErr, setFileErr] = useState(false)\n    const [isLoading, setLoading] = useState(false)\n    const [selectedFile, setSelectedFile] = useState(null)\n\n    const header = {\n        headers:\n        {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n    }\n\n    // Image onChange\n    const imageChangeHandeller = event => {\n        let file = event.target.files[0]\n        if (file) {\n            setSelectedFile(file)\n        }\n    }\n\n    const onSubmit = async (data) => {\n        try {\n            if (!selectedFile) {\n                return setFileErr(true)\n            }\n\n            let formData = new FormData()\n            formData.append('name', data.name)\n            formData.append('image', selectedFile)\n\n            setLoading(true)\n            const response = await axios.post(`${url}admin/category`, formData, header)\n            if (response.data.status === true) {\n                toast.success(response.data.message)\n                setLoading(false)\n            }\n            if (response.data.status === false) {\n                toast.warn(response.data.message)\n                setLoading(false)\n            }\n        } catch (error) {\n            if (error) {\n                console.log(error.response)\n            }\n        }\n    }\n    return (\n        <div className=\"category-create upload\">\n            <Navbar back={true} title={'Create Category'} />\n\n            <div className=\"container-fluid py-3\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            {/* Name */}\n                            <div className=\"form-group mb-4\">\n                                {errors.name && errors.name.message ? (\n                                    <small className=\"text-danger\">{errors.name && errors.name.message}</small>\n                                ) : <small>Name</small>\n                                }\n                                <input\n                                    type=\"text\"\n                                    name=\"name\"\n                                    className=\"form-control rounded-0 shadow-none\"\n                                    placeholder=\"Enter name\"\n                                    ref={register({\n                                        required: \"Name is required\"\n                                    })}\n                                />\n                            </div>\n\n                            {/* Image */}\n                            <div className=\"form-group mb-4\">\n                                {fileErr ? <small className=\"text-danger\">Banner is required</small>\n                                    : <small>Banner</small>\n                                }\n                                <br />\n                                <input\n                                    type=\"file\"\n                                    id=\"banner\"\n                                    className=\"inputfile\"\n                                    accept=\"image/*\"\n                                    onChange={imageChangeHandeller}\n                                />\n                                <label htmlFor=\"banner\">\n                                    <p>Banner Image</p>\n                                </label>\n                            </div>\n\n                            <button\n                                type=\"submit\"\n                                className=\"btn btn-block btn-primary rounded-0 text-white shadow-none\"\n                                disabled={isLoading}\n                            >\n                                {isLoading ? <span>Creating...</span> : <span>Create</span>}\n                            </button>\n\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    );\n};\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}