{"ast":null,"code":"import _regeneratorRuntime from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'../../../styles/user/chat/style.scss';import{useParams}from'react-router-dom';import axios from'axios';import api from'../../../utils/url';import Icon from'react-icons-kit';import{ic_near_me}from'react-icons-kit/md';import{useForm}from'react-hook-form';import Navbar from'../../../components/UserNavbar/Index';import LoadingComponent from'../../../components/Loading/Index';import FourOFourComponent from'../../../components/FourOFour/Index';var MessageRoom=function MessageRoom(){var _useParams=useParams(),id=_useParams.id,name=_useParams.name;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){// Fetch Messages\nvar fetchMessages=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(api,\"comments\"));case 3:result=_context.sent;setMessages(result.data.slice(0,10));setLoading(false);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0){setLoading(false);}console.log(_context.t0.response);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchMessages(){return _ref.apply(this,arguments);};}();fetchMessages();},[id,name]);// Slice Name\nvar sliceName=function sliceName(name){return name.slice(0,1);};// Submit Message\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(data);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"message-room\"},isLoading?/*#__PURE__*/React.createElement(LoadingComponent,null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{title:name,back:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"conversation-container\"},messages&&messages.length>0?messages.map(function(message,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"message\",key:i,id:\"message\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},i!=id?/*#__PURE__*/React.createElement(\"div\",{className:\"person-name-circle rounded-circle mr-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-center flex-column\"},/*#__PURE__*/React.createElement(\"h6\",null,sliceName(name)))):null,/*#__PURE__*/React.createElement(\"div\",{className:i==id?\"recived-message ml-auto text-right\":\"sender-message text-left\"},/*#__PURE__*/React.createElement(\"p\",null,i+' Reference site about Lorem Ipsum, giving information on its origins, as well as a random Lipsum.')),i==id?/*#__PURE__*/React.createElement(\"div\",{className:\"person-name-circle rounded-circle ml-1 bg-primary\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-center flex-column\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"text-white\"},sliceName(message.email)))):null));}):/*#__PURE__*/React.createElement(FourOFourComponent,{messages:'No message found.'})),/*#__PURE__*/React.createElement(\"div\",{className:\"message-sent-container shadow\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-fill\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"message\",className:errors.message?\"form-control shadow-none error-border\":\"form-control shadow-none border-0\",placeholder:\"Write message...\",ref:register({required:true})})),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-1\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn rounded-circle shadow-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-center flex-column\"},/*#__PURE__*/React.createElement(Icon,{icon:ic_near_me,size:24,style:{color:'#007cfa'}})))))))));};export default MessageRoom;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/user/chat/MessageRoom.js"],"names":["React","useEffect","useState","useParams","axios","api","Icon","ic_near_me","useForm","Navbar","LoadingComponent","FourOFourComponent","MessageRoom","id","name","register","handleSubmit","errors","isLoading","setLoading","messages","setMessages","fetchMessages","get","result","data","slice","console","log","response","sliceName","onSubmit","length","map","message","i","email","required","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../../styles/user/chat/style.scss'\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport api from '../../../utils/url'\nimport Icon from 'react-icons-kit'\nimport { ic_near_me } from 'react-icons-kit/md'\nimport { useForm } from 'react-hook-form'\n\nimport Navbar from '../../../components/UserNavbar/Index'\nimport LoadingComponent from '../../../components/Loading/Index'\nimport FourOFourComponent from '../../../components/FourOFour/Index'\n\nconst MessageRoom = () => {\n    const { id, name } = useParams()\n    const { register, handleSubmit, errors } = useForm()\n    const [isLoading, setLoading] = useState(true)\n    const [messages, setMessages] = useState([])\n\n\n    useEffect(() => {\n        // Fetch Messages\n        const fetchMessages = async () => {\n            try {\n                const result = await axios.get(`${api}comments`)\n                setMessages(result.data.slice(0, 10))\n                setLoading(false)\n            } catch (error) {\n                if (error) {\n                    setLoading(false)\n                }\n                console.log(error.response)\n            }\n        }\n        fetchMessages()\n    }, [id, name])\n\n\n    // Slice Name\n    const sliceName = name => {\n        return name.slice(0, 1)\n    }\n\n    // Submit Message\n    const onSubmit = async (data) => {\n        console.log(data)\n    }\n\n    return (\n        <div className=\"message-room\">\n            {isLoading ? <LoadingComponent /> :\n                <div>\n                    <Navbar title={name} back={true} />\n\n                    {/* Conversation Container */}\n                    <div className=\"conversation-container\">\n                        {messages && messages.length > 0 ?\n                            messages.map((message, i) =>\n\n                                <div className=\"message\" key={i} id=\"message\">\n                                    <div className=\"d-flex\">\n\n                                        {/* Sender */}\n                                        {i != id ?\n                                            <div className=\"person-name-circle rounded-circle mr-1\">\n                                                <div className=\"flex-center flex-column\">\n                                                    <h6>{sliceName(name)}</h6>\n                                                </div>\n                                            </div>\n                                            : null}\n\n                                        {/* Conversation */}\n                                        <div className={i == id ? \"recived-message ml-auto text-right\" : \"sender-message text-left\"}>\n                                            <p>\n                                                {i + ' Reference site about Lorem Ipsum, giving information on its origins, as well as a random Lipsum.'}\n                                            </p>\n                                        </div>\n\n                                        {/* Reciver */}\n                                        {i == id ?\n                                            <div className=\"person-name-circle rounded-circle ml-1 bg-primary\">\n                                                <div className=\"flex-center flex-column\">\n                                                    <h6 className=\"text-white\">{sliceName(message.email)}</h6>\n                                                </div>\n                                            </div>\n                                            : null}\n                                    </div>\n                                </div>\n\n                            )\n                            : <FourOFourComponent messages={'No message found.'} />}\n                    </div>\n\n\n                    {/* Message Sent Container */}\n                    <div className=\"message-sent-container shadow\">\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            <div className=\"d-flex\">\n                                <div className=\"flex-fill\">\n                                    <input\n                                        type=\"text\"\n                                        name=\"message\"\n                                        className={errors.message ? \"form-control shadow-none error-border\" : \"form-control shadow-none border-0\"}\n                                        placeholder=\"Write message...\"\n                                        ref={register({ required: true })}\n                                    />\n                                </div>\n                                <div className=\"ml-1\">\n                                    <button type=\"submit\" className=\"btn rounded-circle shadow-none\">\n                                        <div className=\"flex-center flex-column\">\n                                            <Icon icon={ic_near_me} size={24} style={{ color: '#007cfa' }} />\n                                        </div>\n                                    </button>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default MessageRoom;"]},"metadata":{},"sourceType":"module"}