{"ast":null,"code":"import _regeneratorRuntime from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'../../../styles/user/player/style.scss';import ReactPlayer from'react-player';import{useParams}from'react-router-dom';import axios from'axios';import api from'../../../utils/url';import Icon from'react-icons-kit';import{ic_favorite_border}from'react-icons-kit/md';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Navbar from'../../../components/UserNavbar/Index';import VideoList from'../../../components/VideoList/Index';import LoadingComponent from'../../../components/Loading/Index';import FourOFourComponent from'../../../components/FourOFour/Index';import LoadingGif from'../../../assets/static/loading.gif';toast.configure();var Index=function Index(){var _useParams=useParams(),id=_useParams.id,name=_useParams.name;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),videoURL=_useState4[0],setVideoURL=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),videos=_useState8[0],setVideos=_useState8[1];var header={headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}};useEffect(function(){// Show Video\nvar showVideo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(api,\"user/video/\").concat(id,\"/show\"),header);case 3:response=_context.sent;setVideoURL(response.data.video.video);setLoading(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0){console.log(_context.t0.response);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function showVideo(){return _ref.apply(this,arguments);};}();// Fetch Related videos\nvar fetchRelatedVideos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(api,\"user/home\"),header);case 3:response=_context2.sent;setVideos(response.data.videos);setLoading(false);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);if(_context2.t0){setLoading(false);}case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function fetchRelatedVideos(){return _ref2.apply(this,arguments);};}();showVideo();fetchRelatedVideos();},[id,name]);var sliceName=function sliceName(name){if(name){return name.slice(0,15);}return false;};// Add to Favourite List\nvar addFavourite=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var data,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data={uId:localStorage.getItem('id'),videoId:id};_context3.prev=1;setShow(true);_context3.next=5;return axios.post(\"\".concat(api,\"user/video/favourite\"),data,header);case 5:response=_context3.sent;if(response.status===200){setShow(false);toast.success(response.data.message);}if(response.status===208){setShow(false);toast.info(response.data.message);}_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);if(_context3.t0){setShow(false);toast.warn(_context3.t0.response.data.message);}case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function addFavourite(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"player\"},/*#__PURE__*/React.createElement(Navbar,{title:sliceName(name),back:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-0\"},/*#__PURE__*/React.createElement(ReactPlayer,{url:videoURL,width:\"100%\",height:\"100%\",controls:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-0 mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title-box shadow-sm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,name)),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-auto\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn shadow-none p-0\",onClick:function onClick(){return addFavourite(id);},disabled:show},show?/*#__PURE__*/React.createElement(\"img\",{src:LoadingGif,alt:\"...\",style:{width:27,height:27}}):/*#__PURE__*/React.createElement(Icon,{icon:ic_favorite_border,size:27})))))))),isLoading?/*#__PURE__*/React.createElement(LoadingComponent,null):/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},videos.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 px-1\"},/*#__PURE__*/React.createElement(VideoList,{videos:videos})):/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 p-4\"},/*#__PURE__*/React.createElement(FourOFourComponent,null)))));};export default Index;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/user/player/Index.js"],"names":["React","useEffect","useState","ReactPlayer","useParams","axios","api","Icon","ic_favorite_border","toast","Navbar","VideoList","LoadingComponent","FourOFourComponent","LoadingGif","configure","Index","id","name","show","setShow","videoURL","setVideoURL","isLoading","setLoading","videos","setVideos","header","headers","Authorization","localStorage","getItem","showVideo","get","response","data","video","console","log","fetchRelatedVideos","sliceName","slice","addFavourite","uId","videoId","post","status","success","message","info","warn","width","height","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../../styles/user/player/style.scss'\nimport ReactPlayer from 'react-player'\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport api from '../../../utils/url'\nimport Icon from 'react-icons-kit'\nimport { ic_favorite_border } from 'react-icons-kit/md'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport Navbar from '../../../components/UserNavbar/Index'\nimport VideoList from '../../../components/VideoList/Index'\nimport LoadingComponent from '../../../components/Loading/Index'\nimport FourOFourComponent from '../../../components/FourOFour/Index'\n\nimport LoadingGif from '../../../assets/static/loading.gif'\n\ntoast.configure()\nconst Index = () => {\n    const { id, name } = useParams()\n    const [show, setShow] = useState(false)\n    const [videoURL, setVideoURL] = useState(null)\n    const [isLoading, setLoading] = useState(true)\n    const [videos, setVideos] = useState([])\n\n    const header = {\n        headers:\n        {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n    }\n\n    useEffect(() => {\n\n        // Show Video\n        const showVideo = async () => {\n            try {\n                const response = await axios.get(`${api}user/video/${id}/show`, header)\n                setVideoURL(response.data.video.video)\n                setLoading(false)\n            } catch (error) {\n                if (error) {\n                    console.log(error.response)\n                }\n            }\n        }\n\n        // Fetch Related videos\n        const fetchRelatedVideos = async () => {\n            try {\n                const response = await axios.get(`${api}user/home`, header)\n                setVideos(response.data.videos)\n                setLoading(false)\n            } catch (error) {\n                if (error) {\n                    setLoading(false)\n                }\n            }\n        }\n\n        showVideo()\n        fetchRelatedVideos()\n    }, [id, name])\n\n    const sliceName = name => {\n        if (name) {\n            return name.slice(0, 15)\n        }\n        return false\n    }\n\n    // Add to Favourite List\n    const addFavourite = async (id) => {\n        const data = {\n            uId: localStorage.getItem('id'),\n            videoId: id\n        }\n\n        try {\n            setShow(true)\n            const response = await axios.post(`${api}user/video/favourite`, data, header)\n\n            if (response.status === 200) {\n                setShow(false)\n                toast.success(response.data.message)\n            }\n\n            if (response.status === 208) {\n                setShow(false)\n                toast.info(response.data.message)\n            }\n        } catch (error) {\n            if (error) {\n                setShow(false)\n                toast.warn(error.response.data.message)\n            }\n        }\n    }\n\n    return (\n        <div className=\"player\">\n            <Navbar title={sliceName(name)} back={true} />\n\n            <div className=\"container\">\n                <div className=\"row\">\n\n                    {/* Player */}\n                    <div className=\"col-12 p-0\">\n                        <ReactPlayer\n                            url={videoURL}\n                            width=\"100%\"\n                            height=\"100%\"\n                            controls={true}\n                        />\n                    </div>\n\n                    <div className=\"col-12 p-0 mb-2\">\n                        <div className=\"title-box shadow-sm\">\n                            <div className=\"d-flex\">\n                                <div><p>{name}</p></div>\n                                <div className=\"ml-auto\">\n                                    <button\n                                        type=\"button\"\n                                        className=\"btn shadow-none p-0\"\n                                        onClick={() => addFavourite(id)}\n                                        disabled={show}\n                                    >\n                                        {show ?\n                                            <img src={LoadingGif} alt=\"...\" style={{ width: 27, height: 27 }} />\n                                            : <Icon icon={ic_favorite_border} size={27} />}\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n            {/* Related Videos */}\n            {isLoading ? <LoadingComponent /> :\n                <div className=\"container\">\n                    <div className=\"row\">\n                        {videos.length > 0 ?\n                            < div className=\"col-12 px-1\">\n                                <VideoList videos={videos} />\n                            </div>\n                            :\n                            <div className=\"col-12 p-4\">\n                                <FourOFourComponent />\n                            </div>\n                        }\n                    </div>\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}