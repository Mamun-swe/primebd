{"ast":null,"code":"var _jsxFileName = \"/media/mamun/Tools/MERN/prime-bd/client/src/pages/user/chat/MessageRoom.js\";\nimport React, { useEffect, useState } from 'react';\nimport '../../../styles/user/chat/style.scss';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport api from '../../../utils/url';\nimport Icon from 'react-icons-kit';\nimport { ic_near_me } from 'react-icons-kit/md';\nimport { useForm } from 'react-hook-form';\nimport io from 'socket.io-client';\nimport Navbar from '../../../components/UserNavbar/Index';\nimport LoadingComponent from '../../../components/Loading/Index';\nimport FourOFourComponent from '../../../components/FourOFour/Index'; // import ScrollToBottom from 'react-scroll-to-bottom'\n\nlet socket;\n\nconst MessageRoom = () => {\n  const {\n    id,\n    name\n  } = useParams();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [isLoading, setLoading] = useState(true);\n  const [messages, setMessages] = useState([]);\n  const myId = localStorage.getItem('id');\n  const ENDPOINT = 'localhost:4000';\n  useEffect(() => {\n    socket = io(ENDPOINT, {\n      transports: ['websocket', 'polling', 'flashsocket']\n    }); // Fetch Messages\n\n    const fetchMessages = async () => {\n      try {\n        const result = await axios.get(`https://jsonplaceholder.typicode.com/comments`);\n        setMessages(result.data.slice(0, 10));\n        setLoading(false);\n      } catch (error) {\n        if (error) {\n          setLoading(false);\n        }\n\n        console.log(error.response);\n      }\n    };\n\n    fetchMessages();\n  }, [id, name, myId, ENDPOINT]); // Slice Name\n\n  const sliceName = name => {\n    return name.slice(0, 1);\n  }; // Submit Message\n\n\n  const onSubmit = async data => {\n    const messageData = {\n      senderId: myId,\n      reciverId: id,\n      message: data.message\n    };\n    socket.emit('sendmessage', messageData, error);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-room\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(LoadingComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 26\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    title: name,\n    back: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conversation-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, messages && messages.length > 0 ? messages.map((message, i) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message\",\n    key: i,\n    id: \"message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, i != id ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"person-name-circle rounded-circle mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 53\n    }\n  }, sliceName(name)))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: i == id ? \"recived-message ml-auto text-right\" : \"sender-message text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 45\n    }\n  }, i + ' Reference site about Lorem Ipsum, giving information on its origins, as well as a random Lipsum.')), i == id ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"person-name-circle rounded-circle ml-1 bg-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 53\n    }\n  }, sliceName(message.email)))) : null))) : /*#__PURE__*/React.createElement(FourOFourComponent, {\n    messages: 'No message found.',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 31\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-sent-container shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-fill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"message\",\n    className: errors.message ? \"form-control shadow-none error-border\" : \"form-control shadow-none border-0\",\n    placeholder: \"Write message...\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn rounded-circle shadow-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: ic_near_me,\n    size: 24,\n    style: {\n      color: '#007cfa'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 45\n    }\n  })))))))));\n};\n\nexport default MessageRoom;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/user/chat/MessageRoom.js"],"names":["React","useEffect","useState","useParams","axios","api","Icon","ic_near_me","useForm","io","Navbar","LoadingComponent","FourOFourComponent","socket","MessageRoom","id","name","register","handleSubmit","errors","isLoading","setLoading","messages","setMessages","myId","localStorage","getItem","ENDPOINT","transports","fetchMessages","result","get","data","slice","error","console","log","response","sliceName","onSubmit","messageData","senderId","reciverId","message","emit","length","map","i","email","required","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../../styles/user/chat/style.scss'\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport api from '../../../utils/url'\nimport Icon from 'react-icons-kit'\nimport { ic_near_me } from 'react-icons-kit/md'\nimport { useForm } from 'react-hook-form'\nimport io from 'socket.io-client'\n\nimport Navbar from '../../../components/UserNavbar/Index'\nimport LoadingComponent from '../../../components/Loading/Index'\nimport FourOFourComponent from '../../../components/FourOFour/Index'\n// import ScrollToBottom from 'react-scroll-to-bottom'\n\nlet socket;\n\nconst MessageRoom = () => {\n    const { id, name } = useParams()\n    const { register, handleSubmit, errors } = useForm()\n    const [isLoading, setLoading] = useState(true)\n    const [messages, setMessages] = useState([])\n    const myId = localStorage.getItem('id')\n    const ENDPOINT = 'localhost:4000'\n\n\n    useEffect(() => {\n\n        socket = io(ENDPOINT, { transports: ['websocket', 'polling', 'flashsocket'] });\n\n        // Fetch Messages\n        const fetchMessages = async () => {\n            try {\n                const result = await axios.get(`https://jsonplaceholder.typicode.com/comments`)\n                setMessages(result.data.slice(0, 10))\n                setLoading(false)\n            } catch (error) {\n                if (error) {\n                    setLoading(false)\n                }\n                console.log(error.response)\n            }\n        }\n        fetchMessages()\n    }, [id, name, myId, ENDPOINT])\n\n\n    // Slice Name\n    const sliceName = name => {\n        return name.slice(0, 1)\n    }\n\n    // Submit Message\n    const onSubmit = async (data) => {\n        const messageData = {\n            senderId: myId,\n            reciverId: id,\n            message: data.message\n        }\n\n        socket.emit('sendmessage', messageData, (error))\n    }\n\n    return (\n        <div className=\"message-room\">\n            {isLoading ? <LoadingComponent /> :\n                <div>\n                    <Navbar title={name} back={true} />\n\n                    {/* Conversation Container */}\n                    <div className=\"conversation-container\">\n\n                        {messages && messages.length > 0 ?\n                            messages.map((message, i) =>\n\n                                <div className=\"message\" key={i} id=\"message\">\n                                    <div className=\"d-flex\">\n                                        {/* Sender */}\n                                        {i != id ?\n                                            <div className=\"person-name-circle rounded-circle mr-1\">\n                                                <div className=\"flex-center flex-column\">\n                                                    <h6>{sliceName(name)}</h6>\n                                                </div>\n                                            </div>\n                                            : null}\n\n                                        {/* Conversation */}\n                                        <div className={i == id ? \"recived-message ml-auto text-right\" : \"sender-message text-left\"}>\n                                            <p>\n                                                {i + ' Reference site about Lorem Ipsum, giving information on its origins, as well as a random Lipsum.'}\n                                            </p>\n                                        </div>\n\n                                        {/* Reciver */}\n                                        {i == id ?\n                                            <div className=\"person-name-circle rounded-circle ml-1 bg-primary\">\n                                                <div className=\"flex-center flex-column\">\n                                                    <h6 className=\"text-white\">{sliceName(message.email)}</h6>\n                                                </div>\n                                            </div>\n                                            : null}\n                                    </div>\n                                </div>\n\n                            )\n                            : <FourOFourComponent messages={'No message found.'} />}\n\n                    </div>\n\n\n                    {/* Message Sent Container */}\n                    <div className=\"message-sent-container shadow\">\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            <div className=\"d-flex\">\n                                <div className=\"flex-fill\">\n                                    <input\n                                        type=\"text\"\n                                        name=\"message\"\n                                        className={errors.message ? \"form-control shadow-none error-border\" : \"form-control shadow-none border-0\"}\n                                        placeholder=\"Write message...\"\n                                        ref={register({ required: true })}\n                                    />\n                                </div>\n                                <div className=\"ml-1\">\n                                    <button type=\"submit\" className=\"btn rounded-circle shadow-none\">\n                                        <div className=\"flex-center flex-column\">\n                                            <Icon icon={ic_near_me} size={24} style={{ color: '#007cfa' }} />\n                                        </div>\n                                    </button>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default MessageRoom;"]},"metadata":{},"sourceType":"module"}