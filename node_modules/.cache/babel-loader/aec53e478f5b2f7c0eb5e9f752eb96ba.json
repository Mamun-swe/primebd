{"ast":null,"code":"import _regeneratorRuntime from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import axios from'axios';import url from'../../../utils/url';import'../../../styles/user/upload-video/style.scss';import{useForm}from'react-hook-form';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Navbar from'../../../components/AdminNavbar/Index';import LoadingComponent from'../../../components/Loading/Index';var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),updateLoading=_useState4[0],setUpdateLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedFile=_useState8[0],setSelectedFile=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),preview=_useState10[0],setPreview=_useState10[1];var header={headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\")}};useEffect(function(){fetchCategory();},[id]);// Fetch Category \nvar fetchCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.get(\"\".concat(url,\"admin/category/\").concat(id),header);case 4:response=_context.sent;if(response.status===200){setLoading(false);setCategory(response.data);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0){console.log(_context.t0.response);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchCategory(){return _ref.apply(this,arguments);};}();// Image onChange\nvar imageChangeHandeller=function imageChangeHandeller(event){var file=event.target.files[0];if(file){setPreview(URL.createObjectURL(file));setSelectedFile(file);}};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formData,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;formData=new FormData();formData.append('name',data.name);formData.append('image',selectedFile||category.image);formData.append('_method','PUT');setUpdateLoading(true);_context2.next=8;return axios.post(\"\".concat(url,\"admin/category/\").concat(category.id),formData,header);case 8:response=_context2.sent;if(response.data.status===true){toast.success(response.data.message);setUpdateLoading(false);}if(response.data.status===false){toast.warn(response.data.message);setUpdateLoading(false);}_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);if(_context2.t0){console.log(_context2.t0.response);}case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"category-create upload\"},/*#__PURE__*/React.createElement(Navbar,{back:true,title:'Edit Category'}),isLoading?/*#__PURE__*/React.createElement(LoadingComponent,null):null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid py-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-4\"},errors.name&&errors.name.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.name&&errors.name.message):/*#__PURE__*/React.createElement(\"small\",null,\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",className:\"form-control rounded-0 shadow-none\",placeholder:\"Enter name\",defaultValue:category?category.name:null,ref:register({required:\"Name is required\"})})),preview?/*#__PURE__*/React.createElement(\"img\",{src:preview,className:\"img-fluid\",alt:\"...\"}):category?/*#__PURE__*/React.createElement(\"img\",{src:category.image,className:\"img-fluid\",alt:\"...\"}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-2 mb-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"banner\",className:\"inputfile\",accept:\"image/*\",onChange:imageChangeHandeller}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"banner\"},/*#__PURE__*/React.createElement(\"p\",null,\"Banner Image\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-block btn-primary rounded-0 text-white shadow-none\",disabled:updateLoading},updateLoading?/*#__PURE__*/React.createElement(\"span\",null,\"Updating...\"):/*#__PURE__*/React.createElement(\"span\",null,\"Update\")))))));};export default Edit;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/admin/Category/Edit.js"],"names":["React","useEffect","useState","useParams","axios","url","useForm","toast","Navbar","LoadingComponent","Edit","id","register","handleSubmit","errors","isLoading","setLoading","updateLoading","setUpdateLoading","category","setCategory","selectedFile","setSelectedFile","preview","setPreview","header","headers","Authorization","localStorage","getItem","fetchCategory","get","response","status","data","console","log","imageChangeHandeller","event","file","target","files","URL","createObjectURL","onSubmit","formData","FormData","append","name","image","post","success","message","warn","required"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport url from '../../../utils/url'\nimport '../../../styles/user/upload-video/style.scss'\nimport { useForm } from 'react-hook-form'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport Navbar from '../../../components/AdminNavbar/Index'\nimport LoadingComponent from '../../../components/Loading/Index'\n\nconst Edit = () => {\n    const { id } = useParams()\n    const { register, handleSubmit, errors } = useForm()\n    const [isLoading, setLoading] = useState(false)\n    const [updateLoading, setUpdateLoading] = useState(false)\n    const [category, setCategory] = useState()\n    const [selectedFile, setSelectedFile] = useState(null)\n    const [preview, setPreview] = useState()\n\n    const header = {\n        headers:\n        {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n    }\n\n    useEffect(() => {\n        fetchCategory()\n    }, [id])\n\n    // Fetch Category \n    const fetchCategory = async () => {\n        try {\n            setLoading(true)\n            const response = await axios.get(`${url}admin/category/${id}`, header)\n            if (response.status === 200) {\n                setLoading(false)\n                setCategory(response.data)\n            }\n        } catch (error) {\n            if (error) {\n                console.log(error.response)\n            }\n        }\n    }\n\n    // Image onChange\n    const imageChangeHandeller = event => {\n        let file = event.target.files[0]\n        if (file) {\n            setPreview(URL.createObjectURL(file))\n            setSelectedFile(file)\n        }\n    }\n\n    const onSubmit = async (data) => {\n        try {\n\n            let formData = new FormData()\n            formData.append('name', data.name)\n            formData.append('image', selectedFile || category.image)\n            formData.append('_method', 'PUT')\n\n            setUpdateLoading(true)\n            const response = await axios.post(`${url}admin/category/${category.id}`, formData, header)\n            if (response.data.status === true) {\n                toast.success(response.data.message)\n                setUpdateLoading(false)\n            }\n            if (response.data.status === false) {\n                toast.warn(response.data.message)\n                setUpdateLoading(false)\n            }\n        } catch (error) {\n            if (error) {\n                console.log(error.response)\n            }\n        }\n    }\n\n    return (\n        <div className=\"category-create upload\">\n            <Navbar back={true} title={'Edit Category'} />\n            {isLoading ? <LoadingComponent /> : null}\n\n            <div className=\"container-fluid py-3\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <form onSubmit={handleSubmit(onSubmit)}>\n\n                            <div className=\"form-group mb-4\">\n                                {errors.name && errors.name.message ? (\n                                    <small className=\"text-danger\">{errors.name && errors.name.message}</small>\n                                ) : <small>Name</small>\n                                }\n                                <input\n                                    type=\"text\"\n                                    name=\"name\"\n                                    className=\"form-control rounded-0 shadow-none\"\n                                    placeholder=\"Enter name\"\n                                    defaultValue={category ? category.name : null}\n                                    ref={register({\n                                        required: \"Name is required\"\n                                    })}\n                                />\n                            </div>\n\n                            {/* Image */}\n                            {preview ? <img src={preview} className=\"img-fluid\" alt=\"...\" />\n                                : category ? <img src={category.image} className=\"img-fluid\" alt=\"...\" /> : null}\n\n\n                            <div className=\"form-group mt-2 mb-4\">\n                                <input\n                                    type=\"file\"\n                                    id=\"banner\"\n                                    className=\"inputfile\"\n                                    accept=\"image/*\"\n                                    onChange={imageChangeHandeller}\n                                />\n                                <label htmlFor=\"banner\">\n                                    <p>Banner Image</p>\n                                </label>\n                            </div>\n\n                            <button\n                                type=\"submit\"\n                                className=\"btn btn-block btn-primary rounded-0 text-white shadow-none\"\n                                disabled={updateLoading}\n                            >\n                                {updateLoading ? <span>Updating...</span> : <span>Update</span>}\n                            </button>\n\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    );\n};\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}