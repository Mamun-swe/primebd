{"ast":null,"code":"import _regeneratorRuntime from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/mamun/Tools/MERN/prime-bd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'../../styles/auth/style.scss';import{useForm}from'react-hook-form';import{Link,useHistory}from'react-router-dom';import Axios from'axios';import api from'../../utils/url';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Logo from'../../assets/static/logo.png';toast.configure();var Register=function Register(){var history=useHistory();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];// Check Token\nvar checkToken=function checkToken(token){localStorage.setItem('token',token);var role=token.split('.')[0];if(role==='admin'){return history.push('/admin');}if(role==='user'){return history.push('/home');}};// Check if logged in \nif(localStorage.getItem('token')){checkToken(localStorage.getItem('token'));}var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return Axios.post(\"\".concat(api,\"register\"),data);case 4:response=_context.sent;if(response.data.status===true){toast.success(response.data.message);setLoading(false);history.push('/');}if(response.data.status===false){toast.warn(response.data.message);setLoading(false);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);if(_context.t0){setLoading(false);toast.warn(_context.t0.response.message);}case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-center flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card border-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header text-center bg-white border-0\"},/*#__PURE__*/React.createElement(\"img\",{src:Logo,className:\"img-fluid\",alt:\"...\"}),/*#__PURE__*/React.createElement(\"h4\",null,\"Create Account\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-3\"},errors.name&&errors.name.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.name&&errors.name.message):/*#__PURE__*/React.createElement(\"small\",null,\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",className:\"form-control shadow-none\",placeholder:\"Enter username\",ref:register({required:\"Username is required\"})})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-3\"},errors.email&&errors.email.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.email&&errors.email.message):/*#__PURE__*/React.createElement(\"small\",null,\"E-mail\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",className:\"form-control shadow-none\",placeholder:\"Your e-mail\",ref:register({required:\"E-mail is required\",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:\"Invalid email address\"}})})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-3\"},errors.password&&errors.password.message?/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger\"},errors.password&&errors.password.message):/*#__PURE__*/React.createElement(\"small\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",className:\"form-control shadow-none\",placeholder:\"*****\",ref:register({required:\"Please enter password\",minLength:{value:8,message:\"Minimun length 8 character\"}})})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-info shadow-none text-white btn-block\",disabled:isLoading},isLoading?/*#__PURE__*/React.createElement(\"span\",null,\"Submitting...\"):/*#__PURE__*/React.createElement(\"span\",null,\"Submit\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},/*#__PURE__*/React.createElement(\"p\",null,\"Already have an account ? \",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Login\"))))))));};export default Register;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/auth/Register.js"],"names":["React","useState","useForm","Link","useHistory","Axios","api","toast","Logo","configure","Register","history","register","handleSubmit","errors","isLoading","setLoading","checkToken","token","localStorage","setItem","role","split","push","getItem","onSubmit","data","post","response","status","success","message","warn","name","required","email","pattern","value","password","minLength"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport '../../styles/auth/style.scss'\nimport { useForm } from 'react-hook-form'\nimport { Link, useHistory } from 'react-router-dom'\nimport Axios from 'axios'\nimport api from '../../utils/url'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport Logo from '../../assets/static/logo.png'\n\ntoast.configure()\nconst Register = () => {\n    const history = useHistory()\n    const { register, handleSubmit, errors } = useForm()\n    const [isLoading, setLoading] = useState(false)\n\n    // Check Token\n    const checkToken = (token) => {\n        localStorage.setItem('token', token)\n        const role = token.split('.')[0]\n        if (role === 'admin') {\n            return history.push('/admin')\n        }\n\n        if (role === 'user') {\n            return history.push('/home')\n        }\n    }\n\n    // Check if logged in \n    if (localStorage.getItem('token')) {\n        checkToken(localStorage.getItem('token'))\n    }\n\n    const onSubmit = async (data) => {\n        try {\n            setLoading(true)\n            const response = await Axios.post(`${api}register`, data)\n            if (response.data.status === true) {\n                toast.success(response.data.message)\n                setLoading(false)\n                history.push('/')\n            }\n\n            if (response.data.status === false) {\n                toast.warn(response.data.message)\n                setLoading(false)\n            }\n        } catch (error) {\n            if (error) {\n                setLoading(false)\n                toast.warn(error.response.message)\n            }\n        }\n    }\n\n    return (\n        <div className=\"auth\">\n            <div className=\"flex-center flex-column\">\n                <div className=\"card border-0\">\n                    <div className=\"card-header text-center bg-white border-0\">\n                        <img src={Logo} className=\"img-fluid\" alt=\"...\" />\n                        <h4>Create Account</h4>\n                    </div>\n                    <div className=\"card-body\">\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            {/* Name */}\n                            <div className=\"form-group mb-3\">\n                                {errors.name && errors.name.message ? (\n                                    <small className=\"text-danger\">{errors.name && errors.name.message}</small>\n                                ) : <small>Username</small>\n                                }\n\n                                <input\n                                    type=\"text\"\n                                    name=\"name\"\n                                    className=\"form-control shadow-none\"\n                                    placeholder=\"Enter username\"\n                                    ref={register({\n                                        required: \"Username is required\"\n                                    })}\n                                />\n                            </div>\n\n                            {/* Email */}\n                            <div className=\"form-group mb-3\">\n                                {errors.email && errors.email.message ? (\n                                    <small className=\"text-danger\">{errors.email && errors.email.message}</small>\n                                ) : <small>E-mail</small>\n                                }\n\n                                <input\n                                    type=\"text\"\n                                    name=\"email\"\n                                    className=\"form-control shadow-none\"\n                                    placeholder=\"Your e-mail\"\n                                    ref={register({\n                                        required: \"E-mail is required\",\n                                        pattern: {\n                                            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                            message: \"Invalid email address\"\n                                        }\n                                    })}\n                                />\n                            </div>\n\n                            {/* Password */}\n                            <div className=\"form-group mb-3\">\n                                {errors.password && errors.password.message ? (\n                                    <small className=\"text-danger\">{errors.password && errors.password.message}</small>\n                                ) : <small>Password</small>\n                                }\n\n                                <input\n                                    type=\"password\"\n                                    name=\"password\"\n                                    className=\"form-control shadow-none\"\n                                    placeholder=\"*****\"\n                                    ref={register({\n                                        required: \"Please enter password\",\n                                        minLength: {\n                                            value: 8,\n                                            message: \"Minimun length 8 character\"\n                                        }\n                                    })}\n                                />\n                            </div>\n\n                            <button type=\"submit\" className=\"btn btn-info shadow-none text-white btn-block\" disabled={isLoading}>\n                                {isLoading ? <span>Submitting...</span> : <span>Submit</span>}\n                            </button>\n                            <br />\n\n                            <div className=\"text-right\">\n                                <p>Already have an account ? <Link to=\"/\">Login</Link></p>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}