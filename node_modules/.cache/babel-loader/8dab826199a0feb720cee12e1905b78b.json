{"ast":null,"code":"var _jsxFileName = \"/media/mamun/Tools/MERN/prime-bd/client/src/pages/admin/Upload/Video.js\";\nimport React, { useEffect, useState } from 'react';\nimport '../../../styles/user/upload-video/style.scss';\nimport Icon from 'react-icons-kit';\nimport { useForm } from \"react-hook-form\";\nimport { ic_cloud_upload } from 'react-icons-kit/md';\nimport axios from 'axios';\nimport api from '../../../utils/url';\nimport Navbar from '../../../components/AdminNavbar/Index';\n\nconst Video = () => {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [isLoading, setLoading] = useState(false);\n  const [selectedBanner, setSelectedBanner] = useState(null);\n  const [selectedVideo, setSelectedVideo] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [categories, setCategories] = useState([]);\n  const [fileErr, setFileErr] = useState({\n    banner: null,\n    video: null\n  });\n  const [bannerPrev, setBannerPrev] = useState(null);\n  const [videoPrev, setVideoPrev] = useState(null);\n  useEffect(() => {\n    // Fetch Categories\n    const fetchCategories = async () => {\n      try {\n        const response = await axios.get(`${api}admin/category`);\n        setCategories(response.data);\n        setLoading(false);\n      } catch (error) {\n        if (error) {\n          console.log(error.response);\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchCategories();\n  }, []); // Banner onChange\n\n  const bannerChangeHandeller = event => {\n    let file = event.target.files[0];\n\n    if (file) {\n      setBannerPrev(URL.createObjectURL(file));\n      setSelectedBanner(file);\n    }\n  }; // Video onChange\n\n\n  const videoChangeHandeller = event => {\n    let file = event.target.files[0];\n\n    if (file && file.size > 7000000) {\n      setVideoPrev(URL.createObjectURL(file));\n      setSelectedVideo(file);\n      console.log(file);\n    }\n  };\n\n  const onSubmit = async data => {\n    try {\n      if (!selectedBanner) {\n        return setFileErr({\n          banner: 'Banner is required'\n        });\n      }\n\n      if (!selectedVideo) {\n        return setFileErr({\n          video: 'Video is required'\n        });\n      }\n\n      setLoading(true);\n      setProgress(20);\n      let formData = new FormData();\n      formData.append('title', data.title);\n      formData.append('category_id', data.category);\n      formData.append('banner', selectedBanner);\n      formData.append('video', selectedVideo);\n      console.log(data); // const response = await axios.post(`http://127.0.0.1:8000/api/admin/video`, formData)\n      // if (response.status === 200) {\n      //     setLoading(false)\n      // }\n      // console.log(response)\n    } catch (error) {\n      if (error) {\n        console.log(error.response);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    back: true,\n    title: 'Upload Video',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 px-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header p-3 text-center bg-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: ic_cloud_upload,\n    size: 40,\n    style: {\n      color: '#F4A261'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, \"Upload Your Video\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body py-4 px-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 37\n    }\n  }, errors.title && errors.title.message ? /*#__PURE__*/React.createElement(\"small\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 45\n    }\n  }, errors.title && errors.title.message) : /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 45\n    }\n  }, \"Video title\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    className: \"form-control shadow-none rounded-0\",\n    placeholder: \"Enter video title\",\n    ref: register({\n      required: \"Title is required\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 37\n    }\n  }, errors.category && errors.category.message ? /*#__PURE__*/React.createElement(\"small\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 45\n    }\n  }, errors.category && errors.category.message) : /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 45\n    }\n  }, \"Select category\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"category\",\n    className: \"form-control shadow-none rounded-0 pl-2\",\n    ref: register({\n      required: \"Category is required\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 41\n    }\n  }, categories && categories.map((category, i) => /*#__PURE__*/React.createElement(\"option\", {\n    value: category.id,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 49\n    }\n  }, category.name)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 37\n    }\n  }, fileErr && fileErr.banner ? /*#__PURE__*/React.createElement(\"small\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 45\n    }\n  }, fileErr.banner) : null, bannerPrev ? /*#__PURE__*/React.createElement(\"img\", {\n    src: bannerPrev,\n    className: \"img-fluid\",\n    alt: \"...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 55\n    }\n  }) : null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"image\",\n    className: \"inputfile\",\n    accept: \"image/*\",\n    onChange: bannerChangeHandeller,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 45\n    }\n  }, \"Banner Image\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 37\n    }\n  }, fileErr && fileErr.video ? /*#__PURE__*/React.createElement(\"small\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 45\n    }\n  }, fileErr.video) : null, videoPrev ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"embed-responsive embed-responsive-16by9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"iframe\", {\n    className: \"embed-responsive-item\",\n    src: videoPrev,\n    allowFullScreen: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 49\n    }\n  })) : null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"video\",\n    className: \"inputfile\",\n    accept: \"video/*\",\n    onChange: videoChangeHandeller,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 45\n    }\n  }, \"Video file\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary rounded-0 shadow-none text-white btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 37\n    }\n  }, \"Upload\"))))))), isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload-progress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 25\n    }\n  }, \"Uploading...\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  }, \"Don't leave before complete.\"), /*#__PURE__*/React.createElement(\"h1\", {\n    onClick: () => setLoading(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, progress, \"%\"))) : null);\n};\n\nexport default Video;","map":{"version":3,"sources":["/media/mamun/Tools/MERN/prime-bd/client/src/pages/admin/Upload/Video.js"],"names":["React","useEffect","useState","Icon","useForm","ic_cloud_upload","axios","api","Navbar","Video","register","handleSubmit","errors","isLoading","setLoading","selectedBanner","setSelectedBanner","selectedVideo","setSelectedVideo","progress","setProgress","categories","setCategories","fileErr","setFileErr","banner","video","bannerPrev","setBannerPrev","videoPrev","setVideoPrev","fetchCategories","response","get","data","error","console","log","bannerChangeHandeller","event","file","target","files","URL","createObjectURL","videoChangeHandeller","size","onSubmit","formData","FormData","append","title","category","color","message","required","map","i","id","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../../styles/user/upload-video/style.scss'\nimport Icon from 'react-icons-kit'\nimport { useForm } from \"react-hook-form\"\nimport { ic_cloud_upload } from 'react-icons-kit/md'\nimport axios from 'axios'\nimport api from '../../../utils/url'\n\nimport Navbar from '../../../components/AdminNavbar/Index'\n\nconst Video = () => {\n    const { register, handleSubmit, errors } = useForm()\n    const [isLoading, setLoading] = useState(false)\n    const [selectedBanner, setSelectedBanner] = useState(null)\n    const [selectedVideo, setSelectedVideo] = useState(null)\n    const [progress, setProgress] = useState(0)\n    const [categories, setCategories] = useState([])\n    const [fileErr, setFileErr] = useState({ banner: null, video: null })\n    const [bannerPrev, setBannerPrev] = useState(null)\n    const [videoPrev, setVideoPrev] = useState(null)\n\n    useEffect(() => {\n        // Fetch Categories\n        const fetchCategories = async () => {\n            try {\n                const response = await axios.get(`${api}admin/category`)\n                setCategories(response.data)\n                setLoading(false)\n            } catch (error) {\n                if (error) {\n                    console.log(error.response)\n                    setLoading(false)\n                }\n            }\n        }\n\n        fetchCategories()\n    }, [])\n\n    // Banner onChange\n    const bannerChangeHandeller = event => {\n        let file = event.target.files[0]\n        if (file) {\n            setBannerPrev(URL.createObjectURL(file))\n            setSelectedBanner(file)\n        }\n    }\n\n    // Video onChange\n    const videoChangeHandeller = event => {\n        let file = event.target.files[0]\n        if (file && file.size > 7000000) {\n            setVideoPrev(URL.createObjectURL(file))\n            setSelectedVideo(file)\n            console.log(file)\n        }\n    }\n\n    const onSubmit = async (data) => {\n        try {\n            if (!selectedBanner) {\n                return setFileErr({ banner: 'Banner is required' })\n            }\n\n            if (!selectedVideo) {\n                return setFileErr({ video: 'Video is required' })\n            }\n\n            setLoading(true)\n            setProgress(20)\n\n            let formData = new FormData()\n            formData.append('title', data.title)\n            formData.append('category_id', data.category)\n            formData.append('banner', selectedBanner)\n            formData.append('video', selectedVideo)\n\n\n            console.log(data)\n\n            // const response = await axios.post(`http://127.0.0.1:8000/api/admin/video`, formData)\n            // if (response.status === 200) {\n            //     setLoading(false)\n            // }\n            // console.log(response)\n\n        } catch (error) {\n            if (error) {\n                console.log(error.response)\n            }\n        }\n\n    }\n\n    return (\n        <div className=\"upload\">\n            <Navbar back={true} title={'Upload Video'} />\n            <div className=\"container-fluid py-3\">\n                <div className=\"row\">\n                    <div className=\"col-12 px-5\">\n                        <div className=\"card border-0\">\n                            <div className=\"card-header p-3 text-center bg-white\">\n                                <Icon icon={ic_cloud_upload} size={40} style={{ color: '#F4A261' }} />\n                                <h6 className=\"mb-0\">Upload Your Video</h6>\n                            </div>\n                            <div className=\"card-body py-4 px-0\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n                                    {/* Title */}\n                                    <div className=\"form-group mb-3\">\n                                        {errors.title && errors.title.message ? (\n                                            <small className=\"text-danger\">{errors.title && errors.title.message}</small>\n                                        ) : <small>Video title</small>\n                                        }\n\n                                        <input\n                                            type=\"text\"\n                                            name=\"title\"\n                                            className=\"form-control shadow-none rounded-0\"\n                                            placeholder=\"Enter video title\"\n                                            ref={register({\n                                                required: \"Title is required\",\n                                            })}\n                                        />\n                                    </div>\n\n                                    {/* Category */}\n                                    <div className=\"form-group mb-3\">\n                                        {errors.category && errors.category.message ? (\n                                            <small className=\"text-danger\">{errors.category && errors.category.message}</small>\n                                        ) : <small>Select category</small>\n                                        }\n\n                                        <select\n                                            name=\"category\"\n                                            className=\"form-control shadow-none rounded-0 pl-2\"\n                                            ref={register({\n                                                required: \"Category is required\",\n                                            })}\n                                        >\n                                            {categories && categories.map((category, i) =>\n                                                <option value={category.id} key={i}>{category.name}</option>\n                                            )}\n                                        </select>\n                                    </div>\n\n                                    {/* Banner Image */}\n                                    <div className=\"form-group mb-3\">\n                                        {fileErr && fileErr.banner ? (\n                                            <small className=\"text-danger\">{fileErr.banner}</small>\n                                        ) : null}\n\n                                        {bannerPrev ? <img src={bannerPrev} className=\"img-fluid\" alt=\"...\" /> : null}\n\n                                        <input\n                                            type=\"file\"\n                                            id=\"image\"\n                                            className=\"inputfile\"\n                                            accept=\"image/*\"\n                                            onChange={bannerChangeHandeller}\n                                        />\n                                        <label htmlFor=\"image\">\n                                            <p>Banner Image</p>\n                                        </label>\n                                    </div>\n\n                                    {/* Video */}\n                                    <div className=\"form-group mb-3\">\n                                        {fileErr && fileErr.video ? (\n                                            <small className=\"text-danger\">{fileErr.video}</small>\n                                        ) : null}\n\n                                        {videoPrev ?\n                                            <div className=\"embed-responsive embed-responsive-16by9\">\n                                                <iframe className=\"embed-responsive-item\" src={videoPrev} allowFullScreen></iframe>\n                                            </div>\n                                            : null}\n\n                                        <input\n                                            type=\"file\"\n                                            id=\"video\"\n                                            className=\"inputfile\"\n                                            accept=\"video/*\"\n                                            onChange={videoChangeHandeller}\n                                        />\n                                        <label htmlFor=\"video\">\n                                            <p>Video file</p>\n                                        </label>\n                                    </div>\n\n                                    <button type=\"submit\" className=\"btn btn-primary rounded-0 shadow-none text-white btn-block\">Upload</button>\n\n\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Uploading Progress */}\n            {isLoading ?\n                <div className=\"upload-progress\">\n                    <div className=\"flex-center flex-column\">\n                        <h6>Uploading...</h6>\n                        <p>Don't leave before complete.</p>\n                        <h1 onClick={() => setLoading(false)}>{progress}%</h1>\n                    </div>\n                </div>\n                : null}\n        </div>\n    );\n};\n\nexport default Video;"]},"metadata":{},"sourceType":"module"}